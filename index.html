<!DOCTYPE html>
<html lang="en">
<head>
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hit Factor Genie</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Aladin&display=swap');
    body {
      font-family: 'Arial', sans-serif;
      background-color: #2f2f2f;
      color: #fff;
      text-align: center;
    }
    .container {
      max-width: 90%;
      margin: auto;
      background-color: #3b3b3b;
      padding: 10px;
      border-radius: 8px;
    }
    h1 {
      font-family: 'Aladin', cursive;
      color: #1e90ff;
      font-size: 3em;
    }
    h2, h3 {
      color: #1e90ff;
      font-size: 24px;
    }
    .input-group {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .input-group label {
      width: 150px;
      text-align: left;
      margin-right: 10px;
      font-size: 14px;
      color: #ccc;
    }
    input, button, select {
      width: 100%;
      padding: 10px;
      margin: 5px 0;
      border-radius: 5px;
      border: none;
    }
    input {
      background-color: #444;
      color: #fff;
    }
    input::placeholder {
      color: #bbb;
    }
    button {
      background-color: #1e90ff;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background-color: #187bcd;
    }
    .result {
      margin-top: 20px;
      font-size: 18px;
      padding: 10px;
      background: #34495e;
      border-radius: 5px;
      color: #ffbf00;
      min-height: 50px;
    }
    .section {
      margin-top: 30px;
      padding: 20px;
      background-color: #3b3b3b;
      border-radius: 8px;
    }
    .footer {
      margin-top: 30px;
      padding: 20px;
      background-color: #222;
      border-radius: 8px;
      font-size: 14px;
      color: white;
    }
    .footer a {
      color: lightgray;
      text-decoration: underline;
    }
    .dark-mode {
      background-color: #fff;
      color: #000;
    }
    .dark-mode .container, .dark-mode .section, .dark-mode .footer {
      background-color: #ddd;
    }

    /* Sleek Toggle Switch */
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
      margin: 10px;
    }
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #444;
      transition: 0.4s;
      border-radius: 30px;
    }
    .slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }
    input:checked + .slider {
      background-color: #1e90ff;
    }
    input:checked + .slider:before {
      transform: translateX(30px);
    }

    /* Info Toggle Styling */
    .info-toggle {
      background: #555;
      color: white;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
      font-size: 14px;
      margin-top: 10px;
      display: inline-block;
    }
    .info-content {
      display: none;
      margin-top: 10px;
      background: #444;
      padding: 10px;
      border-radius: 5px;
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Hit Factor Genie üßû‚Äç‚ôÇÔ∏è</h1>
    <a href="https://usuckatshooting.com" target="_blank" style="color: lightgray;">Powered By USuckAtShooting</a><br>
    
    <!-- Dark Mode Toggle Switch -->
    <label class="switch">
      <input type="checkbox" id="toggleDarkMode">
      <span class="slider"></span>
    </label>

    <input type="number" id="highHitFactor" placeholder="Current High Hit Factor">
    <input type="number" id="roundCount" placeholder="Stage Round Count">
    <button id="calculateBtn">Calculate</button>
    <div id="result" class="result"></div>

    <!-- HHF Info Toggle -->
    <div class="info-toggle" onclick="toggleInfo('hhfInfoContent')">‚ñº Learn More</div>
    <div id="hhfInfoContent" class="info-content">
      <p>HF Genie's Math follows Eric Grauffel's Method.</p>
      <p>This tool helps you use the current High Hit Factor (HHF) to determine how many points you can afford to drop on a stage. With that insight, you can strategically decide where to push speed and where to play it safe ‚Äî and in some scenarios, plan Charlies on tougher targets like partials, no shoots, and swingers.</p>
      <p>How to find the HHF:<p>
      <p>You can ask the Range Officer for the fastest time on that stage. By estimating the hits, you'll get a good sense of the HHF.</p>
      <p>At major matches with scores posted from the previous day or live scoring updates, you'll have access to the HHF.</p>
    </div>
  </div>

  <!-- Points Down Translated to Time Section -->
  <div class="section">
    <h3>Points Down as Time</h3>
    <div class="input-group">
      <label for="hitFactor">Hit Factor (HF):</label>
      <input type="number" id="hitFactor" placeholder="Enter Hit Factor" min="0">
    </div>
    <div class="input-group">
      <label for="charlies">Charlies:</label>
      <input type="number" id="charlies" placeholder="Enter Charlies" min="0">
    </div>
    <div class="input-group">
      <label for="deltas">Deltas:</label>
      <input type="number" id="deltas" placeholder="Enter Deltas" min="0">
    </div>
    <div class="input-group">
      <label for="mikes">Mikes:</label>
      <input type="number" id="mikes" placeholder="Enter Mikes" min="0">
    </div>
    <div class="input-group">
      <label for="noShoots">No-Shoots:</label>
      <input type="number" id="noShoots" placeholder="Enter No-Shoots" min="0">
    </div>
    <div class="input-group">
      <label for="penalties">Penalties:</label>
      <input type="number" id="penalties" placeholder="Enter Penalties" min="0">
    </div>
    <button id="penaltyCalcBtn">Calculate Penalty</button>
    <div id="penaltyResult" class="result"></div>

    <!-- Points Down Info Toggle -->
    <div class="info-toggle" onclick="toggleInfo('pointsDownInfoContent')">‚ñº Learn More</div>
    <div id="pointsDownInfoContent" class="info-content">
      <p>This tool helps you understand how points dropped (e.g., Charlies, Deltas, Mikes, No-Shoots, and Penalties) affect your performance based on the Hit Factor (HF).</p>
      <p>For example, shooting 1 Charlie (down 2 points) on a 2HF stage is equal to adding 1 second to a clean run (all Alphas).</p>
      <p>By entering your HF and the number of penalties, you can see how much time you lose due to points dropped.</p>
      <p>This data is grounded in mathematics. Hit Factor is calculated as points divided by time, representing points per second. This calculator was inspired by a chart shared by Brantley Merriam.</p>
    </div>
  </div>
  
  <div class="section">
    <h2>Hit Factor Calculator</h2>
    <input type="number" id="points" placeholder="Points">
    <input type="number" id="time" placeholder="Time (sec)">
    <button id="basicCalcBtn">Calculate</button>
    <div id="basicResult" class="result"></div>
  </div>
  
  <div class="section">
    <h3>Advanced Hit Factor Calculator</h3>
    <div class="input-group">
      <label for="scoring">Scoring:</label>
      <select id="scoring">
        <option value="minor">Minor</option>
        <option value="major">Major</option>
      </select>
    </div>
    <div class="input-group">
      <label for="alpha">Alphas:</label>
      <input type="number" id="alpha" placeholder="Enter Alphas" min="0">
    </div>
    <div class="input-group">
      <label for="charlie">Charlies:</label>
      <input type="number" id="charlie" placeholder="Enter Charlies" min="0">
    </div>
    <div class="input-group">
      <label for="delta">Deltas:</label>
      <input type="number" id="delta" placeholder="Enter Deltas" min="0">
    </div>
    <div class="input-group">
      <label for="miss">Misses:</label>
      <input type="number" id="miss" placeholder="Enter Misses" min="0">
    </div>
    <div class="input-group">
      <label for="penalty">No-Shoots / Penalties:</label>
      <input type="number" id="penalty" placeholder="Enter Penalties" min="0">
    </div>
    <div class="input-group">
      <label for="advTime">Time (sec):</label>
      <input type="number" id="advTime" placeholder="Enter Time" min="0">
    </div>
    <button id="advCalcBtn">Calculate</button>
    <div id="advResult" class="result"></div>
  </div>
  
  <div class="footer">
    <p>HF Genie Math follows Eric Grauffel's Method</p>
    <a href="https://dryfire-timer.netlify.app/" target="blank">Dry-Fire Timer<a><br>
    <a href="https://usuckatshooting.com" target="_blank">USuckAtShooting.com</a><br>
    <a href="https://instagram.com/wes.cronin" target="_blank">Wes Cronin</a><br>
    <a href="https://instagram.com/usuckatshooting" target="_blank">USuckAtShooting</a><br>
    <a href="https://www.youtube.com/usuckatshooting" target="_blank">YouTube</a><br>
    <a href="https://usuckatshooting.bigcartel.com/" target="_blank">Support Me / Shirts</a>
  </div>
  
  <script>
    // Dark Mode Toggle
    document.getElementById("toggleDarkMode").addEventListener("change", function() {
      document.body.classList.toggle("dark-mode");
    });

    // Existing Calculate Button Logic
    document.getElementById("calculateBtn").addEventListener("click", function () {
      let highHitFactor = parseFloat(document.getElementById("highHitFactor").value) || 0;
      let roundCount = parseInt(document.getElementById("roundCount").value) || 0;

      if (roundCount < 1 || highHitFactor < 0) {
        document.getElementById("result").innerHTML = "Please enter valid numbers.";
        return;
      }

      let charliesAllowed = 0;
      let deltasAllowed = 0;
      let warning = "";

      if (highHitFactor <= 4.4) {
        charliesAllowed = 0;
        deltasAllowed = 0;
      } else if (highHitFactor > 4.4 && highHitFactor < 7.9) {
        charliesAllowed = Math.floor(roundCount * 0.10);
        deltasAllowed = Math.floor(roundCount * 0.01);
      } else if (highHitFactor >= 7.9 && highHitFactor < 11.9) {
        charliesAllowed = Math.floor(roundCount * 0.20);
        deltasAllowed = Math.floor(roundCount * 0.05);
      } else if (highHitFactor >= 11.9) {
        charliesAllowed = Math.floor(roundCount * 0.50);
        deltasAllowed = 0;
        warning = "Warning: High Hit Factor stage. Prioritize speed, but ensure accuracy on close targets.";
      }

      let makeupShotTime = (15 / highHitFactor).toFixed(2);
      let makeupDeltaTime = (4 / highHitFactor).toFixed(2);

      document.getElementById("result").innerHTML = `
        Allowed Charlies: <b>${charliesAllowed}</b><br>
        Allowed Deltas: <b>${deltasAllowed}</b><br>
        Make up a miss with an Alpha in less than: <b>${makeupShotTime} seconds</b><br>
        Make up a Delta with an Alpha in less than: <b>${makeupDeltaTime} seconds</b><br>
        ${warning ? `<br><b>${warning}</b>` : ""}
      `;
    });

    // Basic Hit Factor Calculator
    document.getElementById("basicCalcBtn").addEventListener("click", function() {
      let points = parseFloat(document.getElementById("points").value) || 0;
      let time = parseFloat(document.getElementById("time").value) || 1;
      document.getElementById("basicResult").innerHTML = `Hit Factor: <b>${(points / time).toFixed(2)}</b>`;
    });

    // Advanced Hit Factor Calculator
    document.getElementById("advCalcBtn").addEventListener("click", function() {
      let scoring = document.getElementById("scoring").value;
      let alphaPoints = scoring === "major" ? 5 : 5;
      let charliePoints = scoring === "major" ? 4 : 3;
      let deltaPoints = scoring === "major" ? 2 : 1;
      let alpha = parseInt(document.getElementById("alpha").value) || 0;
      let charlie = parseInt(document.getElementById("charlie").value) || 0;
      let delta = parseInt(document.getElementById("delta").value) || 0;
      let miss = parseInt(document.getElementById("miss").value) || 0;
      let penalty = parseInt(document.getElementById("penalty").value) || 0;
      let advTime = parseFloat(document.getElementById("advTime").value) || 1;
      let points = (alpha * alphaPoints) + (charlie * charliePoints) + (delta * deltaPoints) - (miss * 10) - (penalty * 10);
      document.getElementById("advResult").innerHTML = `Hit Factor: <b>${(points / advTime).toFixed(2)}</b>`;
    });

    // Penalty Calculator Logic
    document.getElementById("penaltyCalcBtn").addEventListener("click", function () {
      let hitFactor = parseFloat(document.getElementById("hitFactor").value) || 0;
      let charlies = parseFloat(document.getElementById("charlies").value) || 0;
      let deltas = parseFloat(document.getElementById("deltas").value) || 0;
      let mikes = parseFloat(document.getElementById("mikes").value) || 0;
      let noShoots = parseFloat(document.getElementById("noShoots").value) || 0;
      let penalties = parseFloat(document.getElementById("penalties").value) || 0;

      // Ensure no negative values
      if (hitFactor < 0 || charlies < 0 || deltas < 0 || mikes < 0 || noShoots < 0 || penalties < 0) {
        document.getElementById("penaltyResult").innerHTML = "Please enter non-negative values.";
        return;
      }

      if (hitFactor <= 0) {
        document.getElementById("penaltyResult").innerHTML = "Please enter a valid Hit Factor.";
        return;
      }

      // Calculate total points dropped
      let pointsDropped = (charlies * 2) + (deltas * 3) + (mikes * 10) + (noShoots * 10) + (penalties * 10);
      let equivalentTime = (pointsDropped / hitFactor).toFixed(2);

      document.getElementById("penaltyResult").innerHTML = `
        <strong>Total Points Dropped:</strong> ${pointsDropped}<br>
        <strong>Equivalent Time Loss:</strong> ${equivalentTime} seconds<br>
        <em>Shooting these points down is equivalent to adding ${equivalentTime} seconds to your total time. A clean run (with all Alphas) shot ${equivalentTime} seconds slower would result in the same Hit Factor.</em>
      `;
    });

    // Info Toggle Function
    function toggleInfo(id) {
      var info = document.getElementById(id);
      info.style.display = (info.style.display === "none" || info.style.display === "") ? "block" : "none";
    }
  </script>
</body>
</html>
