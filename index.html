<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Hit Factor Genie</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Aladin&display=swap');
    :root {
      --primary: #1e90ff;
      --primary-dark: #187bcd;
      --bg: #2f2f2f;
      --card: #3b3b3b;
      --text: #fff;
      --border: #555;
      --highlight: #ffbf00;
    }
    
    .dark-mode {
      --bg: #f5f5f5;
      --card: #e0e0e0;
      --text: #333;
      --border: #ddd;
      --highlight: #d35400;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      background-color: var(--bg);
      color: var(--text);
      text-align: center;
      padding: 10px;
      line-height: 1.6;
      -webkit-text-size-adjust: 100%;
      -webkit-tap-highlight-color: transparent;
    }
    
    .container, .section {
      max-width: 100%;
      margin: 0 auto 15px;
      background-color: var(--card);
      padding: 15px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .sponsor-container {
      background: var(--card);
      padding: 0;
      margin-bottom: 20px;
      border-radius: 10px;
      overflow: hidden;
      border: 1px solid var(--border);
    }
    
    .sponsor-img {
      width: 100%;
      height: auto;
      display: block;
    }
    
    h1 {
      font-family: 'Aladin', cursive;
      color: var(--primary);
      font-size: 2.2rem;
      margin: 10px 0;
    }
    
    h2, h3 {
      color: var(--primary);
      font-size: 1.4rem;
      margin: 0 0 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid var(--primary);
    }
    
    .input-group {
      margin-bottom: 15px;
      text-align: left;
    }
    
    .input-group label {
      display: block;
      margin-bottom: 6px;
      font-size: 15px;
      color: var(--text);
      opacity: 0.9;
    }
    
    input, button, select {
      width: 100%;
      padding: 14px;
      border-radius: 8px;
      border: none;
      font-size: 16px;
      -webkit-appearance: none;
      transition: all 0.2s;
    }
    
    input {
      background-color: rgba(0,0,0,0.1);
      color: var(--text);
      border: 1px solid var(--border);
    }
    
    input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(30, 144, 255, 0.2);
    }
    
    button {
      background-color: var(--primary);
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
    }
    
    button:active {
      background-color: var(--primary-dark);
      transform: translateY(1px);
    }
    
    .result {
      margin: 15px 0 0;
      font-size: 16px;
      padding: 15px;
      background: rgba(0,0,0,0.1);
      border-radius: 8px;
      color: var(--highlight);
      border: 1px solid var(--primary);
      text-align: left;
    }
    
    .footer {
      margin: 20px auto 10px;
      padding: 15px;
      background-color: var(--card);
      border-radius: 10px;
      font-size: 14px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .footer a {
      color: var(--text);
      text-decoration: none;
      display: block;
      padding: 10px;
      margin: 5px 0;
      border-radius: 6px;
      background: rgba(0,0,0,0.1);
      transition: background 0.2s;
    }
    
    .footer a:active {
      background: rgba(0,0,0,0.2);
    }
    
    .footer-divider {
      height: 1px;
      background: var(--border);
      margin: 8px 0;
      opacity: 0.3;
    }
    
    .info-toggle {
      background: rgba(0,0,0,0.1);
      color: var(--text);
      padding: 12px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      margin: 15px 0 0;
      display: block;
    }
    
    .info-content {
      display: none;
      margin-top: 12px;
      padding: 15px;
      border-radius: 8px;
      text-align: left;
      font-size: 14px;
      background: rgba(0,0,0,0.1);
      line-height: 1.6;
    }
    
    .info-content p {
      margin-bottom: 12px;
    }
    
    .info-content ul {
      margin: 12px 0;
      padding-left: 20px;
    }
    
    .info-content li {
      margin-bottom: 8px;
    }
    
    .info-content div.example {
      background: rgba(0,0,0,0.1);
      padding: 12px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 3px solid var(--primary);
    }
    
    .info-content div.tip {
      background: rgba(30, 144, 255, 0.1);
      padding: 10px;
      border-radius: 6px;
      margin: 15px 0;
      border-left: 3px solid var(--primary);
    }
    
    .powered-by {
      color: var(--text);
      opacity: 0.7;
      margin-bottom: 15px;
      display: block;
      font-size: 14px;
    }
    
    .switch {
      position: relative;
      display: inline-block;
      width: 60px;
      height: 30px;
      margin: 10px 0 15px;
    }
    
    .switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    
    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: var(--border);
      transition: .2s;
      border-radius: 30px;
    }
    
    .slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 4px;
      bottom: 4px;
      background-color: white;
      transition: .2s;
      border-radius: 50%;
    }
    
    input:checked + .slider {
      background-color: var(--primary);
    }
    
    input:checked + .slider:before {
      transform: translateX(30px);
    }
    
    @media (min-width: 500px) {
      .container, .section, .footer {
        max-width: 450px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Sponsor Spot -->
    <div class="sponsor-container">
      <a href="https://usuckatshooting.com/partner-with-us/" target="_blank" class="sponsor-link">
        <img src="https://usuckatshooting.com/wp-content/uploads/2025/03/img_1836.png?w=1024" class="sponsor-img">
      </a>
    </div>
    
    <h1>Hit Factor Genie üßû‚Äç‚ôÇÔ∏è</h1>
    <a href="https://usuckatshooting.com" target="_blank" class="powered-by">Powered By USuckAtShooting</a>
    
    <!-- Dark Mode Toggle Switch -->
    <label class="switch">
      <input type="checkbox" id="toggleDarkMode">
      <span class="slider"></span>
    </label>

    <div class="input-group">
      <label for="highHitFactor">Current High Hit Factor</label>
      <input type="number" id="highHitFactor" placeholder="Enter value" inputmode="decimal">
    </div>
    <div class="input-group">
      <label for="roundCount">Stage Round Count</label>
      <input type="number" id="roundCount" placeholder="Enter count" inputmode="numeric">
    </div>
    <button id="calculateBtn">Calculate</button>
    <div id="result" class="result"></div>

    <!-- HHF Info Toggle -->
    <div class="info-toggle" onclick="toggleInfo('hhfInfoContent')">‚ñº Learn More</div>
    <div id="hhfInfoContent" class="info-content">
      <p><strong>HF Genie's Math follows Eric Grauffel's Method.</strong></p>
      
      <p>This tool helps you use the current High Hit Factor (HHF) to determine how many points you can afford to drop on a stage. With that insight, you can strategically decide where to push speed and where to play it safe ‚Äî and in some scenarios, plan Charlies on tougher targets like partials, no shoots, and swingers.</p>
      
      <h4>How to find the HHF:</h4>
      
      <ul>
        <li>Ask the Range Officer for the fastest time on that stage</li>
        <li>Estimate the hits to calculate the HHF</li>
        <li>Check major match scores from previous days</li>
        <li>Use live scoring updates when available</li>
        <li>Or use the Estimated High Hit Factor Predictor below</li>
      </ul>
    </div>
  </div>

  <!-- Estimated High Hit Factor Predictor -->
  <div class="section">
    <h3>Estimated High Hit Factor Predictor</h3>
    <div class="input-group">
      <label for="currentHHF">Hit Factor</label>
      <input type="number" id="currentHHF" placeholder="Enter HF" min="0" inputmode="decimal" step="0.01">
    </div>
    <div class="input-group">
      <label for="shooterPercentage">% of Winner</label>
      <input type="number" id="shooterPercentage" placeholder="80" min="1" max="99" inputmode="numeric">
    </div>
    <button id="estimateHHFBtn">Predict Winner's HF</button>
    <div id="estimateHHFResult" class="result"></div>

    <!-- Updated Info Toggle -->
    <div class="info-toggle" onclick="toggleInfo('estimateHHFInfoContent')">‚ñº "Measure the gap, close the gap" - Learn How</div>
    <div id="estimateHHFInfoContent" class="info-content">
      <div style="text-align: center; margin-bottom: 15px;">
        <h4 style="color: var(--primary); margin-bottom: 8px;">"Measure the gap, close the gap"</h4>
        <p style="font-style: italic;">Use another shooter's consistent performance to predict stage potential</p>
      </div>
      
      <p><strong>How It Works:</strong> If a shooter consistently achieves X% of the stage winner's HF (e.g., 80%), this calculator can estimate the 100%.</p>
      
      <div class="example">
        <p><strong>Example Calculation:</strong></p>
        <p>Hit Factor: <span style="color: var(--highlight); font-weight: bold;">6.8</span> at 80%</p>
        <p>‚Üí Winner's HF ‚âà <span style="color: var(--highlight); font-weight: bold;">8.5</span></p>
      </div>
      
      <h4>Key Insights:</h4>
      <ul>
        <li><strong>+1.7 HF</strong> needed to match the winner</li>
        <li>This means either:
          <ul>
            <li>25% faster with equal points, <strong>or</strong></li>
            <li>25% more points (like converting 2 Charlies to Alphas)</li>
          </ul>
        </li>
        <li>Every 0.5s saved = must keep 4.25 points</li>
        <li>Every Charlie (-2pts) = 0.24s time penalty</li>
      </ul>
      
      <h4>Next Steps:</h4>
      <ul>
        <li>See your allowed Charlies/Deltas</li>
        <li>Calculate exact miss penalties</li>
        <li>Optimize your speed/accuracy balance</li>
      </ul>
      
      <div class="tip">
        <p><strong>Pro Tip:</strong> Use the average consistent percentage (e.g., 75%) for the best estimates.</p>
      </div>
    </div>
  </div>

  <!-- Points Down as Time -->
  <div class="section">
    <h3>Points Down as Time</h3>
    <div class="input-group">
      <label for="hitFactor">Hit Factor (HF)</label>
      <input type="number" id="hitFactor" placeholder="Enter Hit Factor" min="0" inputmode="decimal">
    </div>
    <div class="input-group">
      <label for="charlies">Charlies</label>
      <input type="number" id="charlies" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="deltas">Deltas</label>
      <input type="number" id="deltas" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="mikes">Mikes</label>
      <input type="number" id="mikes" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="noShoots">No-Shoots</label>
      <input type="number" id="noShoots" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="penalties">Penalties</label>
      <input type="number" id="penalties" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <button id="penaltyCalcBtn">Calculate Penalty</button>
    <div id="penaltyResult" class="result"></div>

    <!-- Points Down Info Toggle -->
    <div class="info-toggle" onclick="toggleInfo('pointsDownInfoContent')">‚ñº Learn More</div>
    <div id="pointsDownInfoContent" class="info-content">
      <p>This tool helps you understand how points dropped affect your performance based on the Hit Factor (HF).</p>
      
      <div class="example">
        <p><strong>Example:</strong> Shooting 1 Charlie (down 2 points) on a 2HF stage is equal to adding 1 second to a clean run (all Alphas).</p>
      </div>
      
      <h4>Key Concepts:</h4>
      <ul>
        <li>Hit Factor = Points √∑ Time</li>
        <li>Represents points per second</li>
        <li>Higher HF means each point is more valuable</li>
        <li>Lower HF allows more point drops</li>
      </ul>
      
      <p>By entering your HF and penalty counts, you can see the time equivalent of your accuracy decisions.</p>
      
      <div class="tip">
        <p><strong>Note:</strong> This calculator was inspired by a chart shared by Brantley Merriam.</p>
      </div>
    </div>
  </div>
  
  <!-- Hit Factor Calculator -->
  <div class="section">
    <h2>Hit Factor Calculator</h2>
    <div class="input-group">
      <label for="scoring">Scoring</label>
      <select id="scoring">
        <option value="minor">Minor</option>
        <option value="major">Major</option>
      </select>
    </div>
    <div class="input-group">
      <label for="alpha">Alphas</label>
      <input type="number" id="alpha" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="charlie">Charlies</label>
      <input type="number" id="charlie" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="delta">Deltas</label>
      <input type="number" id="delta" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="miss">Misses</label>
      <input type="number" id="miss" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="penalty">No-Shoots / Penalties</label>
      <input type="number" id="penalty" placeholder="Enter count" min="0" inputmode="numeric">
    </div>
    <div class="input-group">
      <label for="advTime">Time (sec)</label>
      <input type="number" id="advTime" placeholder="Enter time" min="0" inputmode="decimal">
    </div>
    <button id="advCalcBtn">Calculate</button>
    <div id="advResult" class="result"></div>
  </div>
  
  <div class="footer">
    <p>HF Genie Math follows Eric Grauffel's Method</p>
    <a href="https://dryfire-timer.netlify.app/" target="_blank">Dry-Fire Timer</a>
    <div class="footer-divider"></div>
    <a href="https://usuckatshooting.com" target="_blank">USuckAtShooting.com</a>
    <div class="footer-divider"></div>
    <a href="https://instagram.com/wes.cronin" target="_blank">Wes Cronin</a>
    <div class="footer-divider"></div>
    <a href="https://instagram.com/usuckatshooting" target="_blank">USuckAtShooting</a>
    <div class="footer-divider"></div>
    <a href="https://www.youtube.com/usuckatshooting" target="_blank">YouTube</a>
    <div class="footer-divider"></div>
    <a href="https://usuckatshooting.bigcartel.com/" target="_blank">Support Me / Shirts</a>
  </div>
  
  <script>
    // Dark Mode Toggle
    document.getElementById("toggleDarkMode").addEventListener("change", function() {
      document.body.classList.toggle("dark-mode");
      localStorage.setItem('darkMode', this.checked);
    });

    // Check for saved dark mode preference
    if (localStorage.getItem('darkMode') === 'true') {
      document.getElementById('toggleDarkMode').checked = true;
      document.body.classList.add('dark-mode');
    }

    // Main Calculator Logic
    document.getElementById("calculateBtn").addEventListener("click", function () {
      let highHitFactor = parseFloat(document.getElementById("highHitFactor").value) || 0;
      let roundCount = parseInt(document.getElementById("roundCount").value) || 0;

      if (roundCount < 1 || highHitFactor < 0) {
        document.getElementById("result").innerHTML = "Please enter valid numbers.";
        return;
      }

      let charliesAllowed = 0;
      let deltasAllowed = 0;
      let warning = "";

      if (highHitFactor <= 4.4) {
        charliesAllowed = 0;
        deltasAllowed = 0;
      } else if (highHitFactor > 4.4 && highHitFactor < 7.9) {
        charliesAllowed = Math.floor(roundCount * 0.10);
        deltasAllowed = Math.floor(roundCount * 0.01);
      } else if (highHitFactor >= 7.9 && highHitFactor < 11.9) {
        charliesAllowed = Math.floor(roundCount * 0.20);
        deltasAllowed = Math.floor(roundCount * 0.05);
      } else if (highHitFactor >= 11.9) {
        charliesAllowed = Math.floor(roundCount * 0.50);
        deltasAllowed = 0;
        warning = "Warning: High Hit Factor stage. Prioritize speed, but ensure accuracy on close targets.";
      }

      let makeupShotTime = (15 / highHitFactor).toFixed(2);
      let makeupDeltaTime = (4 / highHitFactor).toFixed(2);

      document.getElementById("result").innerHTML = `
        Allowed Charlies: <b>${charliesAllowed}</b><br>
        Allowed Deltas: <b>${deltasAllowed}</b><br>
        Make up a miss with an Alpha in less than: <b>${makeupShotTime} seconds</b><br>
        Make up a Delta with an Alpha in less than: <b>${makeupDeltaTime} seconds</b><br>
        ${warning ? `<br><b>${warning}</b>` : ""}
      `;
    });

    // Hit Factor Calculator
    document.getElementById("advCalcBtn").addEventListener("click", function() {
      let scoring = document.getElementById("scoring").value;
      let alphaPoints = scoring === "major" ? 5 : 5;
      let charliePoints = scoring === "major" ? 4 : 3;
      let deltaPoints = scoring === "major" ? 2 : 1;
      let alpha = parseInt(document.getElementById("alpha").value) || 0;
      let charlie = parseInt(document.getElementById("charlie").value) || 0;
      let delta = parseInt(document.getElementById("delta").value) || 0;
      let miss = parseInt(document.getElementById("miss").value) || 0;
      let penalty = parseInt(document.getElementById("penalty").value) || 0;
      let advTime = parseFloat(document.getElementById("advTime").value) || 1;
      let points = (alpha * alphaPoints) + (charlie * charliePoints) + (delta * deltaPoints) - (miss * 10) - (penalty * 10);
      document.getElementById("advResult").innerHTML = `Hit Factor: <b>${(points / advTime).toFixed(2)}</b>`;
    });

    // Penalty Calculator Logic
    document.getElementById("penaltyCalcBtn").addEventListener("click", function () {
      let hitFactor = parseFloat(document.getElementById("hitFactor").value) || 0;
      let charlies = parseFloat(document.getElementById("charlies").value) || 0;
      let deltas = parseFloat(document.getElementById("deltas").value) || 0;
      let mikes = parseFloat(document.getElementById("mikes").value) || 0;
      let noShoots = parseFloat(document.getElementById("noShoots").value) || 0;
      let penalties = parseFloat(document.getElementById("penalties").value) || 0;

      if (hitFactor < 0 || charlies < 0 || deltas < 0 || mikes < 0 || noShoots < 0 || penalties < 0) {
        document.getElementById("penaltyResult").innerHTML = "Please enter non-negative values.";
        return;
      }

      if (hitFactor <= 0) {
        document.getElementById("penaltyResult").innerHTML = "Please enter a valid Hit Factor.";
        return;
      }

      let pointsDropped = (charlies * 2) + (deltas * 3) + (mikes * 10) + (noShoots * 10) + (penalties * 10);
      let equivalentTime = (pointsDropped / hitFactor).toFixed(2);

      document.getElementById("penaltyResult").innerHTML = `
        <strong>Total Points Dropped:</strong> ${pointsDropped}<br>
        <strong>Equivalent Time Loss:</strong> ${equivalentTime} seconds<br>
        <em>This means shooting with these penalties is equivalent to shooting clean but ${equivalentTime} seconds slower.</em>
      `;
    });

    // Estimated High Hit Factor Calculator Logic
    document.getElementById("estimateHHFBtn").addEventListener("click", function() {
      const shooterHF = parseFloat(document.getElementById("currentHHF").value) || 0;
      const percentage = parseFloat(document.getElementById("shooterPercentage").value) || 0;

      if (shooterHF <= 0 || percentage <= 0 || percentage >= 100) {
        document.getElementById("estimateHHFResult").innerHTML = "Please enter valid numbers (0 < % < 100).";
        return;
      }

      const trueHHF = (shooterHF / (percentage / 100)).toFixed(2);
      const hfDifference = (trueHHF - shooterHF).toFixed(2);
      const percentImprovement = ((100 / percentage) * 100 - 100).toFixed(0);

      document.getElementById("estimateHHFResult").innerHTML = `
        <strong>Predicted HHF:</strong> ${trueHHF}<br>
        <strong>To match winner:</strong> +${hfDifference} HF needed<br>
        <strong>Improvement:</strong> ${percentImprovement}% faster/more points<br>
        <em>Plug ${trueHHF} into the HF Genie calculator for stage strategy!</em>
      `;
    });

    // Info Toggle Function
    function toggleInfo(id) {
      var info = document.getElementById(id);
      info.style.display = (info.style.display === "none" || info.style.display === "") ? "block" : "none";
    }

    // Prevent zooming on input focus for mobile
    document.addEventListener('DOMContentLoaded', function() {
      if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
        document.querySelectorAll('input').forEach(input => {
          input.addEventListener('focus', function() {
            document.querySelector('meta[name="viewport"]').setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0');
          });
          input.addEventListener('blur', function() {
            document.querySelector('meta[name="viewport"]').setAttribute('content', 'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
          });
        });
      }
    });
  </script>
</body>
</html>
